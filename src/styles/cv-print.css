/* CV Print Styles - Robust PDF Export with Edge-Case Fixes */

/* CV Base Classes */
.cv-root { 
  font-family: var(--cv-font-family); 
  line-height: var(--cv-line); 
  font-feature-settings: "liga","kern"; 
  text-rendering: optimizeLegibility;
  unicode-bidi: plaintext; /* RTL/LTL auto-detection */
}
.cv-title { font-size: var(--cv-title); }
.cv-subtitle { font-size: var(--cv-subtitle); }
.cv-p { font-size: var(--cv-text); }
.cv-card { 
  padding: var(--cv-pad-card); 
  margin-bottom: var(--cv-gap);
  unicode-bidi: plaintext;
}

/* Header/Image Stability */
.cv-header {
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: center;
  column-gap: 12pt;
  max-height: var(--cv-header-h);
  overflow: hidden;
}
.cv-header-img {
  height: var(--cv-logo-h);
  width: auto;
  max-width: 64pt;
  object-fit: contain;
}
.cv-header-meta { min-width: 0; overflow: hidden; }
.cv-header-meta .cv-title { 
  white-space: nowrap; 
  text-overflow: ellipsis; 
  overflow: hidden; 
}

/* Page Setup */
@page { 
  margin: 12mm; 
}

@media print {
  html, body {
    margin: 0 !important;
    padding: 0 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Desktop-A4 */
  .cv-a4 {
    width: 210mm;
    min-height: 297mm;
    page-break-after: always;
    box-sizing: border-box;
  }
  .cv-a4:last-child { page-break-after: auto; }

  /* Mobile narrow */
  .cv-narrow {
    width: 90mm; 
    margin: 0;
    box-sizing: border-box;
    page-break-after: always;
  }
  .cv-narrow:last-child { page-break-after: auto; }

  /* Cards protection */
  .cv-card {
    break-inside: avoid;
    page-break-inside: avoid;
    -webkit-column-break-inside: avoid;
    overflow-wrap: anywhere; /* Fix long words/URLs */
    word-break: break-word;
    hyphens: auto;
  }

  /* Sections + Titles */
  .cv-section { 
    break-inside: avoid;
    page-break-inside: avoid; 
    padding-bottom: 2pt;
    unicode-bidi: plaintext;
  }
  .cv-section-title {
    break-after: avoid;
    page-break-after: avoid;
  }
  .cv-section-title + .cv-card {
    break-before: avoid;
    page-break-before: avoid;
  }

  /* Flex/Grid safety */
  .cv-flex, .cv-grid { display: block !important; }

  /* Legacy support */
  .cv-entry {
    page-break-inside: avoid;
    break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
  }
}

/* Also apply these styles for screen to match print layout */
.cv-section {
  break-inside: avoid;
  margin-bottom: 20px;
}

.break-inside-avoid {
  break-inside: avoid;
}